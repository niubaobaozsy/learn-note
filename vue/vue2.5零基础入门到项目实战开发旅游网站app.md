# vue2.5零基础入门到项目实战开发旅游网站app（1）

学习方法：1、在学习的时候如何判断如何来：看consumer项目中的代码。2、看完这个慕课网视频，再看一遍vue官网文档。

## 第三章  

1、mvvm模式  m数据  v视图层  vm数据变化，视图层自动变化。视图变化，数据也变化这个是由vue完成。

2、凡是已$开头的都是vue的一个实例方法或者实例属性。`vue.￥data`

3、vue实例生命周期

​	生命周期函数就是vue实例在某个时间点会自动执行的函数

​	vue生命周期函数不定义在methods中，而是直接定义在vue实例中。

4、模板语法：

​	计算属性：computed（一个属性由其他属性结合起来，其中一个改变，这个属性也会改变）****

​	watch（监听某一个属性，如果改变了就做相应的函数）

5、计算属性的set和get方法。****

6、vue中的样式绑定

​	`:class="[activated]"`使用数据的形式，说明class里面的东西都是由数组中的对象决定。

​	样式绑定有两种方法：一种样式和一种数组

7、vue中的条件渲染部分

​	`v-if=""`：决定这个元素是否在页面存在

​	 `v-show=""`：决定这个元素是否在页面显示

8、对数组的操作，遍历数据显示在页面

​	item是userInfo中的一条记录。key是这条记录的key名称。index表示是第几条记录。

![TIM截图20180723110243](E:\学习笔记\image\TIM截图20180723110243.png)

	>在渲染的时候 ，标签template可以帮助我们循环里面的东西。但是不会真正出现在页面dom中

在vue中直接使用赋值方法，是不能双向绑定使得页面的数据改变的（修改引用，让其指向另外一个数组是可以的）。要改变得使用遍历的方法。

以下是数组的变异方法

- `push()`
- `pop()`
- `shift()`
- `unshift()`
- `splice()`
- `sort()`
- `reverse()`

9、可以通过`vue.set()`方法改变对象内容。来实现数据变化，页面跟着变。

set方法不仅是一个vue的全局方法，也是实例方法 `vm.$set()`vm是一个vue的实例

数组中set方法的使用 `Vue.set(vm.userInfo, 1, 5)`将数组中的第一个元素换成5



## 第四章 深入理解vue组件

#####1、使用组件的细节点

​	当想在table中使用自己定义的组件时，由于html5规定了tbody中必须要有tr标签。会出现组件不显示在table里面的问题

解决：给tr中添加一个属性`is="组件名"`来表示这个标签实际上是组件名代表的这个组件。

![TIM截图20180723112306](E:\学习笔记\image\TIM截图20180723112306.png)

select下必须写option，ul下要用li。也是如此，都可以用is属性来解决这个问题。

> 在根组件中data数据可以直接是一个对象。但是在子组件中，data必须是一个function，并返回一个对象，这个对象时候你定义的数据。

目的是使每一子组件都有单独的的数据存储区域。子组件会被调用多次。这样子组件之间不会影响。



> vue中获取dom元素的方法：给标签添加引用就可以获得。如果这个标签是一个组件，那么这个组件那么获得的是这个组件的引用。使用这个引用，父组件就可以调用

子组件向父组件通信时。父组件可以根据子组件的引用来获取其中的内容。父组件可以进行相应操作。

`<counter ref="one"></counter>   this.$refs.one`获取z组件one的应用。其中`this.$refs`是获取所有到了所有的引用。

##### 2、父子组件间的数据传递。相互

总结：父组件向子组件使用属性的方式传值，子组件通过事件的方式向父组件传值。

`子组件中使用props来实现对父组件数据的接收`

> 在vue中定义了单项数据流，也就是父组件给子组件传递的数据，子组件只能使用，但是不能修改。因为是多个子组件都可以使用这个数据，修改的话会互相影响。

> `<div count="0"></div>` `<div :count="1"></div>`这两个的区别：第一个中的count是一个字符串，第二个count是一个数字。因为：中是绑定的意思。里面的东西是js表达式。

![TIM截图20180723145515](E:\学习笔记\image\TIM截图20180723145515.png)



> 子组件向父组件传值。使用触发事件的方式。`this.$emit('事件'，)`向外触发一个时间。
>
> emit触发事件的同时，可以传递多个参数给父组件



##### 组件参数的校验与非props特性

组件参数的校验：就是父组件给子组件传值，子组件需要的参数的格式进行规定

> 1、可以用对象来表示props数据，可以用对象来表示接收的对象。其中可以定义好要要求的格式：type类型（可用数据表示多选类型）required是否必须传 default默认内容  validator自定义过滤器。其中value是传过来的值。

![TIM截图20180723152139](E:\学习笔记\image\TIM截图20180723152139.png)



> props属性：父组件向子组件传递了一个属性，就是子组件使用了props来接收父组件定义的数据。props属性特点：父组件定义的属性不会显示在dom中，并且子组件可以使用这个属性中的数据。非props属性特点：父组件定义的属性，但是子组件没有使用props来接收，这个属性会显示在dom中，并且子组件不能使用这个数据。

##### 给组件绑定原生事件

给本身标签添加事件`<div @click="abc"></div>`是添加的原生事件。可以在组件中的methods中添加abc方法。在组件中添加事件如下图中的child标签，给它添加的事件，需要child组件使用emit来激发。

![TIM截图20180723193530](E:\学习笔记\image\TIM截图20180723193530.png)

如果给组件标签添加的事件，希望是父组件的原生事件。可以加native修饰符，使得变成原生事件，点击组件父组件能直接监听到

#### 非父子组件间的传值

解决这类问题：要么需要借助其他工具来实现。或者使用**总线/发布订阅模式/观察者模式**。

```vue
<div id="root">
    <child content="dell"></child>
    <child content="lee"></child>
</div>
<script>
	Vue.prototype.bus = new Vue()//在Vue中添加了一个bus属性（可以理解为是一个静态属性，所有的实例都含有这个bus属性）
    Vue.component('child',{
        data: function(){
            return {
                selfConent: this.content
            }
        },
        props: {
            content: String
        },
        tmplate: '<div @click="handleClick">{{selfContent}}</div>',
        methods: {
            handleClick: function(){
                this.bus.$emit('change',this.selfContent)
            }
        },
        mounted: function(){//生命周期函数，加载之后添加好事件
            var this_ = this
            this.bus.$on('change',function(msg){//监听change事件，由于this域改变，在这之前把this保存
                this_.selfContent = msg
            })
        }
    })
</script>
```



#### 在vue中使用插槽

使用插槽，可以和方便的向子组件插入dom元素。

slot新特性：1、`<slot>默认</slot`当`<child></child>`中没有添加内容的话，插槽里面就会显示默认二字。

2、区域名插槽。就是可以使用多个slot标签来显示指定内容。

![TIM截图20180723203233](E:\学习笔记\image\TIM截图20180723203233.png)



#### 作用域插槽

当子组件中的dom元素和循环时是由外部决定时，使用作用域插槽。

其中`<template >`必须用template来包裹，而且`slot-scope="props"`中的props表示要展示的数据。

子组件把变量发送出去，在template中的slot-scope里面接受

![TIM截图20180723203831](E:\学习笔记\image\TIM截图20180723203831.png)



#### 动态组件与v-once指令

1、动态组件：`<component  :is="type"></component>`

动态组件，会根据is中的值来动态决定采用那个组件。这个厉害了！

2、v-once。使用来提高性能。当第一次加载之后，会放入内存中，每次改变直接去内存中使用