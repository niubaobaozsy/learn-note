# **Node js内存泄露**

原因

- 全局变量
- 代码缓存
- 闭包

## 如何避免内存泄露

- ESLint检测代码，排查非期望的全局变量。
- 使用闭包的时候，得知道闭包了什么对象，还有引用闭包的对象何时清除闭包。最好可以避免写出复杂的闭包，因为复制的闭包引起的内存泄露，如果没有打印内存快照的话，是很难看出来的。
- 绑定事件的时候，一定得在恰当的时候清除事件。在编写一个类的时候，推荐使用init函数对类的事件监听进行绑定和资源申请，然后destory函数对事件和占用资源进行释放。

## nodejs内存泄漏分析工具heapdump

https://www.cnblogs.com/xieqianli/p/12619886.html

后面有机会，在新项目中用用

